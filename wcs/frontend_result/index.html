<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Handling Results of Payment Process :: QENTA Online Guides</title>
    <link rel="canonical" href="https://guides.qenta.com/online-guides/main/wcs/frontend_result/">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="/_/css/site.css">
<link rel="stylesheet" href="/_/css/search.css">
<link rel="stylesheet" href="/_/css/qenta.css">
<link rel="stylesheet" href="https://use.typekit.net/ucf2gvc.css">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script>var uiRootPath = '/_'</script>
    <link rel="icon" href="/_/img/Favicon-QENTA-RGB.png" type="image/png">
  </head>
  <body class="article">
<header class="header" role="banner">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://guides.qenta.com">QENTA Online Guides</a>
        <div class="navbar-item search-item">
          <input id="search-input" type="text" placeholder="Search">
        </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item is-hoverable">
          <a class="navbar-link" href="https://qenta-cee.at/">Enterprise</a>
        </div>
        <div class="navbar-item is-hoverable">
          <a class="navbar-link" href="https://qenta-cee.at/haendler-login/">Merchant Login</a>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="https://guides.qenta.com/contact/">Contact</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="online-guides" data-version="main">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../">QENTA Online Guides</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../start/">Home</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../news/start/">What&#8217;s New?</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../wcp/start/">QPAY Checkout Page</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../start/">QMORE Checkout Seamless</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../back-end_operations/start/">Back-end Operations</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../shop_plugins/start/">Integration into Shop Systems</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../payment_methods/start/">Integration of Payment Methods</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Card Payments</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../payment_methods/creditcard/start/">Credit Card</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../payment_methods/3dsecure2/start/">3D Secure 2</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../payment_methods/ccard_moto/start/">Mail and Telephone Order</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../payment_methods/maestro/start/">Maestro SecureCode</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Bank Transfer</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#payment_methods/bancontact_mrcash/start.adoc">payment_methods/bancontact_mrcash/start.adoc</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../payment_methods/eps/start/">eps-Überweisung</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../payment_methods/giropay/start/">giropay</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../payment_methods/ideal/start/">iDEAL</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../payment_methods/p24/start/">Przelewy24</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../payment_methods/sofort/start/">Sofort.</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Alternative Payments</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../payment_methods/invoice/start/">Invoice</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../payment_methods/invoice/payolution/">payolution</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../payment_methods/installment/start/">Installment</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../payment_methods/installment/payolution/">payolution</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="#payment_methods/installment/ratepay.adoc">RatePAY</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../payment_methods/paypal/start/">PayPal</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../payment_methods/paysafecard/start/">paysafecard</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Direct Debit</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../payment_methods/sepa_direct_debit/start/">SEPA Direct Debit</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../wca/start/">QFILE Checkout Automated</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../wct/start/">QCALL Checkout Terminal</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../pmc/start/">QPC Payment Center</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../how_to/start/">How to &#8230;&#8203;</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../glossary/">Glossary</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../contact/">Contact</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">QENTA Online Guides</span>
    <span class="version">main</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../../">QENTA Online Guides</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../">main</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../start/" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../">QENTA Online Guides</a></li>
    <li><a href="./">Handling Results of Payment Process</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Handling Results of Payment Process</h1>
<div class="sect1">
<h2 id="HandlingResultsOfPaymentProcess"><a class="anchor" href="#HandlingResultsOfPaymentProcess"></a>Handling Results of Payment Process</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="PossibleResultsOfPaymentProcess"><a class="anchor" href="#PossibleResultsOfPaymentProcess"></a>Possible results of payment process</h3>
<div class="paragraph">
<p>There are four possible results which can be returned from QMORE Checkout Seamless to the <code>confirmUrl</code>:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">State</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SUCCESS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The payment process has been successfully completed by your consumer.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CANCEL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The payment process has been canceled by your consumer.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">FAILURE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The payment process has not been finished successfully.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PENDING</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The result of the payment process has yet to be determined. Typically occurs on payment methods requiring additional checks or actions by financial service providers or your consumer. When QENTA retrieves updated information from the financial service provider, either a success or a failure is sent to your online shop.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="ReceivingResultOfPaymentProcess"><a class="anchor" href="#ReceivingResultOfPaymentProcess"></a>Receiving result of payment process</h3>
<div class="paragraph">
<p>After your consumer has finished the payment process, QMORE Checkout Seamless sends the result to your online shop, e.g. the <code>confirmUrl</code> you set when initiating the payment process. The data is sent as a POST request. Be aware that (in contrast to QPAY Checkout Page) the response parameters are only sent to the <code>confirmUrl</code> and <strong>not</strong> to the <code>successUrl</code>, <code>cancelUrl</code>, <code>failureUrl</code> or <code>pendingUrl</code>.</p>
</div>
<div class="paragraph">
<p>Please visit <a href="../../response_parameters/" class="page">Response Parameters</a> for a detailed description of the parameters you receive, which may vary depending on the payment method.</p>
</div>
<div class="paragraph">
<p>The result of the payment can be processed depending on the parameter <code>paymentState</code> as shown in this simplified example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php hljs" data-lang="php">$paymentState = isset($_POST["paymentState"]) ? $_POST["paymentState"] : "undefined";

$message = "The message text has not been set.";
if (strcmp($paymentState, "CANCEL") == 0) {
  $message = "The payment transaction has been canceled by the consumer.";
} else
if (strcmp($paymentState, "PENDING") == 0) {
  $message = "The payment is pending and not yet finished.";
} else
if (strcmp($paymentState, "FAILURE") == 0) {
  $failure_message = isset($_POST["message"]) ? $_POST["message"] : "";
  $message = "An error occurred during the payment transaction: " . $failure_message;
} else
if (strcmp($paymentState,"SUCCESS") == 0) {
  // check fingerprint and handle successful payment
  $message = "The payment has been successfully completed.";
}

// store message and additional response parameter on your system</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="AfterProcessingTheResult"><a class="anchor" href="#AfterProcessingTheResult"></a>After processing the result</h3>
<div class="paragraph">
<p>After the result of the payment which was effected by your consumer is sent to the <code>confirmUrl</code> on your web server, your consumer is redirected to one of the following URLs provided in the request parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>successUrl</code></p>
</li>
<li>
<p><code>cancelUrl</code></p>
</li>
<li>
<p><code>failurUrl</code></p>
</li>
<li>
<p><code>pendingUrl</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Please be aware that no additional parameters are sent when redirecting to one of these URLs.</p>
</div>
<div class="paragraph">
<p>These URLs point to web pages on your web server. Thus you can proceed with the next step in your online shop depending on the result of the payment process.</p>
</div>
</div>
<div class="sect2">
<h3 id="CheckingIfReturnedValuesAreValid"><a class="anchor" href="#CheckingIfReturnedValuesAreValid"></a>Checking if returned values are valid</h3>
<div class="paragraph">
<p>To check the authenticity of the return values sent from the QENTA Checkout Server to your online shop, compare the <code>responseFingerprint</code> with an hash of the return values.</p>
</div>
<div class="paragraph">
<p>Create a string by concatenating all returned parameters based on the order in the return parameter <code>responseFingerprintOrder</code>. Then hash the string with an <a href="https://en.wikipedia.org/wiki/Hash-based_message_authentication_code">HMAC-SHA-512</a> algorithm using the secret as cryptographic key and compare the result with the value of the return parameter <code>responseFingerprint</code>. If both values are identical, the response is authentic, i.e. the confirmation was indeed sent by QENTA. If these values are not identical, re-check the calculation and consider that someone compromised the return values or has sent a possibly <strong>false confirmation for the payment</strong>. Therefore, do not trust these return values and do not assume that the payment was made even if it appears that way to you!</p>
</div>
<div class="paragraph">
<p>In order to ensure a secure communication it is essential that you <strong>never</strong> disclose or share your secret with persons who are not involved in developing the online shop! Also, <strong>never</strong> forward the secret via unsecured communication channels e.g. mail, e-mail, fax or instant messaging. When the secret is submitted by fax make sure that the contents of the fax is disclosed only to authorized persons!</p>
</div>
<div class="paragraph">
<p>If you suspect that your secret is known to unauthorized persons contact our <a href="../../support/" class="page">support teams</a> immediately to request a new secret!</p>
</div>
</div>
<div class="sect2">
<h3 id="StoringPaymentResultInYourOnlineShop"><a class="anchor" href="#StoringPaymentResultInYourOnlineShop"></a>Storing payment result in your online shop</h3>
<div class="sect3">
<h4 id="WhyStoringPaymentRelatedData"><a class="anchor" href="#WhyStoringPaymentRelatedData"></a>Why storing payment related data</h4>
<div class="paragraph">
<p>Please note that connection problems, technical issues on your web server or any issues at your consumer may result in a loss of session-related information regarding your consumer, e.g. the content of the shopping cart or an already generated unique order number for a specific order. Especially if the consumer successfully finished the payment process it may not be possible to correlate the session-related information regarding the order details to the successful payment of your consumer.</p>
</div>
<div class="paragraph">
<p>To prevent such situations we strongly recommend that you store all session-related information during the overall payment process persistently, e.g. in a file or a database.</p>
</div>
</div>
<div class="sect3">
<h4 id="WhyStoringReturnValuesOfQMORECheckoutSeamless"><a class="anchor" href="#WhyStoringReturnValuesOfQMORECheckoutSeamless"></a>Why storing return values of QMORE Checkout Seamless</h4>
<div class="paragraph">
<p>To be able to identify each payment of each consumer at a later time and to correlate it to the corresponding session and order <strong>store all return values</strong> of QMORE Checkout Seamless in relation to that session and order.</p>
</div>
<div class="paragraph">
<p>This is required in order to ensure a well-defined relation between the session data, the order of your consumer and the results of the checkout process.</p>
</div>
</div>
<div class="sect3">
<h4 id="LocationForStoringData"><a class="anchor" href="#LocationForStoringData"></a>Location for storing data</h4>
<div class="paragraph">
<p>To ensure a persistent storage of all data relevant to the checkout process of your consumers, please save all relevant data persistently either in the file system or a database.</p>
</div>
</div>
<div class="sect3">
<h4 id="TimeForStoringData"><a class="anchor" href="#TimeForStoringData"></a>Time for storing data</h4>
<div class="paragraph">
<p>Before starting the payment process in QMORE Checkout Seamless:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Save all relevant data regarding the payment process in a persistent manner (e.g. file system or database) in your online shop.</p>
</li>
<li>
<p>Set the request parameter <code>orderIdent</code> to a unique ID regarding the session and order of your consumer. This can be a session ID, an order number or a debit number.</p>
</li>
<li>
<p>Use custom parameters to pass a unique ID corresponding to a payment process to the QENTA Checkout Server. All of your custom parameters are returned to your online shop as return values after the payment process has been completed.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>After the payment process is completed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Save all returned values or at least the returned order number you receive from the QENTA Checkout Server. Also ensure that you can relate them to the initial data regarding the payment process.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="UnfinishedPaymentProcess"><a class="anchor" href="#UnfinishedPaymentProcess"></a>Unfinished payment process</h3>
<div class="paragraph">
<p>If your consumer starts the payment process and is <strong>inactive for more than 30 minutes</strong>, the Wirecard Checkout Server will check if the payment has been realized or not.</p>
</div>
<div class="paragraph">
<p>The result of this check will be sent to your online shop by calling the <code>confirmUrl</code> with the details of the result. The possible result state for such situations can either be <code>SUCCESS</code> for a successful payment or <code>FAILURE</code> if no payment was effected by your consumer.</p>
</div>
</div>
<div class="sect2">
<h3 id="QENTACheckoutJournal"><a class="anchor" href="#QENTACheckoutJournal"></a>QENTA Checkout Journal</h3>
<div class="paragraph">
<p>To check your integration of Wirecard Checkout Seamless regarding transactions (except data storage operations) you can use a "debugging" tool which gives you an overview of your transaction details when doing a checkout.</p>
</div>
<div class="paragraph">
<p>Note that due to data protection regulations no test mode transactions are possible.</p>
</div>
<div class="paragraph">
<p>Please enter the username and password you receive from QENTA to get access to all transactions regarding your specific <code>customerId</code>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">QENTA Checkout Journal</th>
<th class="tableblock halign-left valign-top"></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://portal.qenta.com/journal/" class="bare">https://portal.qenta.com/journal/</a></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer qenta">
  <div class="uk-section-secondary uk-section">
    <div class="uk-container">
      <div class="tm-grid-expand uk-grid-large uk-grid-margin-large uk-grid" uk-grid="">
        <div class="uk-width-1-3@m uk-first-column">
          <div class="uk-position-relative uk-margin" style="left: 0px; bottom: 20px;">
            <a class="el-link" href="#2" uk-scroll=""><img class="el-image" alt=""
                data-src="/wp-content/uploads/2020/10/RZ-Logo-QENTA-CMYK-invertiert.svg" uk-img=""
                src="https://qenta-cee.at/wp-content/uploads/2020/10/RZ-Logo-QENTA-CMYK-invertiert.svg" width="120"></a>
          </div>
          <div class="uk-panel uk-text-meta uk-position-relative" style="bottom: 20px;">
            <p>©2020 - QENTA PAYMENT CEE GMBH</p>
          </div>
        </div>
        <div class="uk-width-2-3@m">
          <div class="uk-text-right">
            <ul class="uk-margin-remove-bottom uk-subnav uk-flex-right" uk-margin="">
              <li class="el-item uk-first-column">
                <a class="el-link" href="https://qenta-cee.at/">Unternehmen</a>
              </li>
              <li class="el-item">
                <a class="el-link" href="https://qenta-cee.at/haendler-login">Händler-Login</a>
              </li>
              <li class="el-item">
                <a class="el-link" href="https://qenta-cee.at/loesungen">Lösungen</a>
              </li>
              <li class="el-item">
                <a class="el-link" href="https://qenta-cee.at/kontakt">Kontakt</a>
              </li>
              <li class="el-item">
                <a class="el-link" href="https://qenta-cee.at/karriere">Karriere</a>
              </li>
              <li class="el-item">
                <a class="el-link" href="https://qenta-cee.at/start" target="_blank">Online Guides</a>
              </li>
              <li class="el-item">
                <a class="el-link" href="https://qenta-cee.at/download-center">Download Center</a>
              </li>
            </ul>
          </div>
          <div class="uk-text-right">
            <ul class="uk-margin-remove-bottom uk-subnav uk-flex-right" uk-margin="">
              <li class="el-item uk-first-column">
                <a class="el-link" href="https://qenta-cee.at/impressum">Impressum</a>
              </li>
              <li class="el-item">
                <a class="el-link" href="https://qenta-cee.at/datenschutz">Datenschutz</a>
              </li>
              <li class="el-item">
                <a class="el-link" href="https://qenta-cee.at/agb">AGB</a>
              </li>
              <li class="el-item">
                <a class="el-link" href="https://qenta-cee.at/dpa">DPA</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</footer>
<script src="/_/js/site.js"></script>
<script src="/_/js/vendor/lunr.js"></script>
<script src="/_/js/vendor/search.js" id="search-script" data-base-path="../../../.." data-page-path="/online-guides/main/wcs/frontend_result/"></script>
<script async src="/search-index.js"></script>
<script async src="/_/js/vendor/highlight.js"></script>
  </body>
</html>
